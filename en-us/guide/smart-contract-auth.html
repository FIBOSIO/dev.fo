


<!DOCTYPE html>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.8.0">
  <title>
    Account Authority — FIBOS Developer Community</title>
  <meta charset="utf-8">
  <meta name="description" content="FIBOS 是一个结合 FIBJS 以及 EOS 的 JavaScript 的运行平台">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">


  <meta property="og:type" content="article">
  <meta property="og:title" content="Account Authority — Dev.fo">
  <meta property="og:description" content="FIBOS 是一个结合 FIBJS 以及 EOS 的 JavaScript 的运行平台">
  <meta property="og:image" content="https://dev.fo//images/downlogo.png">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Account Authority — Dev.fo">
  <meta name="twitter:description" content="FIBOS 是一个结合 FIBJS 以及 EOS 的 JavaScript 的运行平台">
  <meta name="twitter:image" content="https://dev.fo/images/downlogo.png">

  <link rel="apple-touch-icon" sizes="32x32" href="/images/icon/32*32.ico">
  <link rel="apple-touch-icon" sizes="64x64" href="/images/icon/64*64.ico">
  <link rel="icon" type="image/x-icon" sizes="32x32" href="/images/icon/32*32.ico">
  <link rel="icon" type="image/x-icon" sizes="64x64" href="/images/icon/64*64.ico">


  <meta name="msapplication-TileColor" content="#4fc08d">
  <meta name="theme-color" content="#4fc08d">

  <meta name="msapplication-config" content="browserconfig.xml">

   <!-- HTTP 1.1 -->
  <meta http-equiv="pragma" content="no-cache">
  <!-- HTTP 1.0 -->
  <meta http-equiv="cache-control" content="no-cache">
  <!-- Prevent caching at the proxy server -->
  <meta http-equiv="expires" content="0">

  <link rel="manifest" href="/manifest.json">

  <!-- main page styles -->
  <link rel="stylesheet" href="/css/page.css">

  <script>
    window.PAGE_TYPE = "tutorials"
  </script>
</head>

<body class="docs">
  <div id="mobile-bar">
    <a class="menu-button"></a>
    <a class="logo" href="/"></a>
  </div>
  <div id="header">
  <a id="logo" href="/en-us/">
    <img src="/images/Group.svg" alt="Developer logo">
    <!-- <span>Developer</span> -->
  </a>
  <ul id="nav">
    <!-- <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li> -->
<li>
  <a href="/en-us/" class="nav-link contribute">Home</a>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">Guides</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/en-us/guide/introduction.html" class="nav-link">Introduction</a></li>
      <li><a href="/en-us/guide/installation.html" class="nav-link">Installation</a></li>
      <li><a href="/en-us/guide/start.html" class="nav-link">Quick Start</a></li>
      <li><a href="/en-us/guide/tutorials-instructions.html" class="nav-link tutorials">Guides</a></li>

      <li><a href="/en-us/guide/smart-contract-instructions.html" class="nav-link">Smart Contracts</a></li>
      <li><a href="/en-us/guide/system-resources.html" class="nav-link">System Contracts</a></li>
      <li><a href="/en-us/guide/token-transfer.html" class="nav-link">Token Contracts</a></li>
      <li><a href="/en-us/guide/node-instruction.html" class="nav-link tutorials ">Node Guide</a></li>

      <li><a href="/en-us/guide/access-guide.html" class="nav-link">Access Guide</a></li>
    </ul></li>
  </ul>
</li>


<li class="nav-dropdown-container learn">
    <a class="nav-link">Manual</a><span class="arrow"></span>
    <ul class="nav-dropdown">
      <li><ul>
        <li><a href="/en-us/api/smartcontract/index.html" class="nav-link">JS Contract</a></li>
        <li><a href="/en-us/api/fibos/index.html" class="nav-link">FIBOS Node</a></li>
        <li><a href="/en-us/api/eosiocontract/index.html" class="nav-link">System Contract</a></li>
        <li><a href="/en-us/api/token/index.html" class="nav-link">Token Contract</a></li>
        <li><a href="/en-us/api/fibosjs/index.html" class="nav-link">FIBOS.JS</a></li>
        <li><a href="/en-us/api/rpc/index.html" class="nav-link">RPC API</a></li>
        <li><a href="/en-us/api/msig/index.html" class="nav-link">Msig Contract</a></li>
      </ul></li>
    </ul>
  </li>
<!-- <li>
  <a href="/api/technology/index.html" class="nav-link team">技术手册</a>
</li> -->
<li>
  <a href="http://forum.fo/" class="nav-link contribute " target="_blank">Community</a>
</li>
<li>
  <a href="https://fibos.io/" class="nav-link contribute" target="_blank">FIBOS</a>
</li>
<li class="nav-dropdown-container language">
  
  
    <a class="nav-link"><img src="/images/en.png"></a><span class="arrow"></span>
  
<ul class="nav-dropdown">
    <li>
        <a href="/zh-cn/guide/smart-contract-auth.html"><img src="/images/zh.png">
        <span class="lang">简体中文</span>
        </a>
    </li>
    <li>
        <a href="/en-us/guide/smart-contract-auth.html"><img src="/images/en.png">
        <span class="lang">English</span>
        </a>
    </li>
</ul>
</li>

  </ul>
</div>

  
  <div id="main" class="fix-sidebar">
    
    
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <!-- <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li> -->
<li>
  <a href="/en-us/" class="nav-link contribute">Home</a>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">Guides</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/en-us/guide/introduction.html" class="nav-link">Introduction</a></li>
      <li><a href="/en-us/guide/installation.html" class="nav-link">Installation</a></li>
      <li><a href="/en-us/guide/start.html" class="nav-link">Quick Start</a></li>
      <li><a href="/en-us/guide/tutorials-instructions.html" class="nav-link tutorials">Guides</a></li>

      <li><a href="/en-us/guide/smart-contract-instructions.html" class="nav-link">Smart Contracts</a></li>
      <li><a href="/en-us/guide/system-resources.html" class="nav-link">System Contracts</a></li>
      <li><a href="/en-us/guide/token-transfer.html" class="nav-link">Token Contracts</a></li>
      <li><a href="/en-us/guide/node-instruction.html" class="nav-link tutorials ">Node Guide</a></li>

      <li><a href="/en-us/guide/access-guide.html" class="nav-link">Access Guide</a></li>
    </ul></li>
  </ul>
</li>


<li class="nav-dropdown-container learn">
    <a class="nav-link">Manual</a><span class="arrow"></span>
    <ul class="nav-dropdown">
      <li><ul>
        <li><a href="/en-us/api/smartcontract/index.html" class="nav-link">JS Contract</a></li>
        <li><a href="/en-us/api/fibos/index.html" class="nav-link">FIBOS Node</a></li>
        <li><a href="/en-us/api/eosiocontract/index.html" class="nav-link">System Contract</a></li>
        <li><a href="/en-us/api/token/index.html" class="nav-link">Token Contract</a></li>
        <li><a href="/en-us/api/fibosjs/index.html" class="nav-link">FIBOS.JS</a></li>
        <li><a href="/en-us/api/rpc/index.html" class="nav-link">RPC API</a></li>
        <li><a href="/en-us/api/msig/index.html" class="nav-link">Msig Contract</a></li>
      </ul></li>
    </ul>
  </li>
<!-- <li>
  <a href="/api/technology/index.html" class="nav-link team">技术手册</a>
</li> -->
<li>
  <a href="http://forum.fo/" class="nav-link contribute " target="_blank">Community</a>
</li>
<li>
  <a href="https://fibos.io/" class="nav-link contribute" target="_blank">FIBOS</a>
</li>
<li class="nav-dropdown-container language">
  
  
    <a class="nav-link"><img src="/images/en.png"></a><span class="arrow"></span>
  
<ul class="nav-dropdown">
    <li>
        <a href="/zh-cn/guide/smart-contract-auth.html"><img src="/images/zh.png">
        <span class="lang">简体中文</span>
        </a>
    </li>
    <li>
        <a href="/en-us/guide/smart-contract-auth.html"><img src="/images/en.png">
        <span class="lang">English</span>
        </a>
    </li>
</ul>
</li>

    </ul>
    <div class="list">
      
        <h2>
            
            Guidelines
          </h2>
        <ul class="menu-root">
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/introduction.html" class="sidebar-link">Introduction</a>
        </li>
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/installation.html" class="sidebar-link">Installation</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/start.html" class="sidebar-link">Quick Start</a>
        </li>
      
  
      
    
      
      
        
          
            <li><h3>Guides</h3></li>
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/tutorials-instructions.html" class="sidebar-link">Introductions</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/tutorials-setnode.html" class="sidebar-link">Build local test node</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/tutorials-abi.html" class="sidebar-link">Smart Contract - ABI Files</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/tutorials-js.html" class="sidebar-link">Smart Contract——JS Contract</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/tutorials-deploy.html" class="sidebar-link">Deploy Contracts</a>
        </li>
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/tutorials-testcase.html" class="sidebar-link">Test Contract</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/tutorials-usecontract.html" class="sidebar-link">Develop DApp Client</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
            <li><h3>Smart Contracts</h3></li>
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/smart-contract-instructions.html" class="sidebar-link">Contract Introduction</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/smart-contract-ABI.html" class="sidebar-link">ABI File</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/smart-contract-database.html" class="sidebar-link">Database</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/smart-contract-auth.html" class="sidebar-link current">Account Authority</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/smart-contract-inlinecall.html" class="sidebar-link">Call In-contract</a>
        </li>
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/smart-contract-recipient.html" class="sidebar-link">Notification</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
            <li><h3>System Contracts</h3></li>
          
          
          
          
        
        <li>
          <a href="/en-us/guide/system-resources.html" class="sidebar-link">Resources</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/system-account.html" class="sidebar-link">Account</a>
        </li>
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/system-permission.html" class="sidebar-link">Permission</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
            <li><h3>Token Contracts</h3></li>
          
          
          
        
        <li>
          <a href="/en-us/guide/token-transfer.html" class="sidebar-link">Transfer</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/token-card.html" class="sidebar-link">Token</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/token-exchange.html" class="sidebar-link">Token Exchange</a>
        </li>
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/token-wallet.html" class="sidebar-link">Contract Sub-Wallet</a>
        </li>
      
  
      
    
      
      
        
          
          
          
          
          
            <li><h3>Node Guide</h3></li>
          
          
        
        <li>
          <a href="/en-us/guide/node-instruction.html" class="sidebar-link">Node Introduction</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/node-nodesNet.html" class="sidebar-link">Add to nodes network</a>
        </li>
      
  
      
    
      
      
        
          
          
          
          
          
          
        
        <li>
          <a href="/en-us/guide/node-persistence.html" class="sidebar-link">Node Data Persistence</a>
        </li>
      
  
      
    
      
      
  
      
    
      
      
  
      
    
      
      
        
          
          
          
          
          
          
            <li><h3>Access Guide</h3></li>
          
        
        <li>
          <a href="/en-us/guide/access-guide.html" class="sidebar-link">FO 接入安全指南</a>
        </li>
      
  
      
    
  </ul>
  

      
    </div>
  </div>
</div>


<div class="content tutorials with-sidebar ">
  
    
  
  
    <h1>Account Authority</h1>
  
  
    <p>As with all system designs, we also need to validate the rights of accounts in the development of smart contracts. Several functions are provided in the <a href="../api/smartcontract/index.html">action</a>  module to meet our requirements.</p>
<h2 id="Verify-the-existence-of-an-account"><a href="#Verify-the-existence-of-an-account" class="headerlink" title="Verify the existence of an account"></a>Verify the existence of an account</h2><p>Before verifying account permissions, we can confirm the validity of the account. The <code>is_account</code> function of the <a href="../api/smartcontract/index.html">action</a> module can be used to easily implement this.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exports.hi = <span class="function"><span class="params">account</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (action.is_account(account)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.notice(<span class="string">"account exists"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">"account notexists"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Verify-Account-Authorization"><a href="#Verify-Account-Authorization" class="headerlink" title="Verify Account Authorization"></a>Verify Account Authorization</h2><p>Just as the traditional system needs to check the user’s login status, the authorization of user accounts can also be checked in the development of smart contracts. We can use the <code>has_auth</code> function to check whether <code>action</code> requires authorization for specified account.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">exports.hi = <span class="function"><span class="params">account</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (action.has_auth(account))&#123;</span><br><span class="line">    <span class="built_in">console</span>.notice(<span class="string">"action be authed"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Verify-account-permissions"><a href="#Verify-account-permissions" class="headerlink" title="Verify account permissions"></a>Verify account permissions</h2><p>If  is only verification of account authorization, the <code>require_auth</code> function in the <a href="../api/smartcontract/index.html">action</a> module can achieve a similar effect as  <code>has_auth</code>. But the two are different.</p>
<ol>
<li>If <code>Has_auth</code> verification sees theres no specific account authorization verification, it returns a Boolean value of <code>false</code>. When <code>require_auth</code> fails to add a specified account, an exception is thrown and the contract is withdrawn after execution is interrupted.</li>
<li><code>The require_auth</code> function checks not only whether the account is authorized, but also whether the account provides the corresponding permissions.</li>
</ol>
<p>FIBOS accounts have two privileges： <code>owner</code>、<code>active</code>。</p>
<ul>
<li><code>owner</code> Super privileges, represents the owner of the account, because the owner of this privilege can be used to operate other privilege configurations, which are not commonly used in transactions (transfer, contract action, etc.).</li>
<li><code>active</code> Common business authority, such as: transfer, voting, etc.</li>
</ul>
<p>In the following code example, if the client invokes the contract method <code>hi</code>, the contract throws an exception and interrupts execution without providing authorization for the account corresponding to the passed parameter <code>account</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exports.hi = <span class="function"><span class="params">account</span> =&gt;</span> &#123;</span><br><span class="line">  action.require_auth(account);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"auth success"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>In the following code example, <code>require_auth</code> requires <code>active</code> permissions of <code>account</code> corresponding accounts. Otherwise, an exception will be thrown and execution will be interrupted.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exports.hi = <span class="function"><span class="params">account</span> =&gt;</span> &#123;</span><br><span class="line">  action.require_auth(account, <span class="string">'active'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"action be authed"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Of course, in addition to the default two privileges, developers can also add custom privileges to the account, and then validate them in the contract.</p>

  
  
</div>

    
  </div>
  <script src="/js/smooth-scroll.min.js">"</script>
  

  <!-- main custom script for sidebars, version selects etc. -->
  <script src="/js/css.escape.js">"</script>
  <script src="/js/common.js">"</script>

  <!-- fastclick -->
  <script src="/js/fastclick.js">"</script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      FastClick.attach(document.body)
    }, false)
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125332104-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-125332104-3');
  </script>
</body>

</html>