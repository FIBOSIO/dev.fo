

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <title>
    FIBOS 开发者社区</title>
  <meta charset="utf-8">
  <meta name="description" content="FIBOS 是一个结合 FIBJS 以及 EOS 的 JavaScript 的运行平台">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">


  <meta property="og:type" content="article">
  <meta property="og:title" content="Dev.fo">
  <meta property="og:description" content="FIBOS 是一个结合 FIBJS 以及 EOS 的 JavaScript 的运行平台">
  <meta property="og:image" content="https://dev.fo//images/downlogo.png">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Dev.fo">
  <meta name="twitter:description" content="FIBOS 是一个结合 FIBJS 以及 EOS 的 JavaScript 的运行平台">
  <meta name="twitter:image" content="https://dev.fo/images/downlogo.png">

  <link rel="apple-touch-icon" sizes="32x32" href="/images/icon/32*32.ico">
  <link rel="apple-touch-icon" sizes="64x64" href="/images/icon/64*64.ico">
  <link rel="icon" type="image/x-icon" sizes="32x32" href="/images/icon/32*32.ico">
  <link rel="icon" type="image/x-icon" sizes="64x64" href="/images/icon/64*64.ico">


  <meta name="msapplication-TileColor" content="#4fc08d">
  <meta name="theme-color" content="#4fc08d">

  <meta name="msapplication-config" content="browserconfig.xml">
  <link rel="manifest" href="/manifest.json">

  <!-- main page styles -->
  <link rel="stylesheet" href="/css/page.css">

  <script>
    window.PAGE_TYPE = "fibos"
  </script>
</head>

<body class="docs">
  <div id="mobile-bar" >
    <a class="menu-button"></a>
    <a class="logo" href="/"></a>
  </div>
  <div id="header">
  <a id="logo" href="/">
    <img src="/images/Group.svg" alt="Developer logo">
    <!-- <span>Developer</span> -->
  </a>
  <ul id="nav">
    <!-- <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li> -->
<li>
  <a href="/" class="nav-link contribute">首页</a>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">开发指南</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/guide/introduction.html" class="nav-link">简介</a></li>
      <li><a href="/guide/installation.html" class="nav-link">安装</a></li>
      <li><a href="/guide/start.html" class="nav-link">入门</a></li>
      <li><a href="/guide/tutorials-instructions.html" class="nav-link tutorials">教程</a></li>
      <li><a href="/guide/smart-contract-instructions.html" class="nav-link">智能合约</a></li>
      <li><a href="/guide/system-resources.html" class="nav-link">系统合约</a></li>
      <li><a href="/guide/token-transfer.html" class="nav-link">Token 合约</a></li>
      <li><a href="/guide/node-instruction.html" class="nav-link">节点编程</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
    <a class="nav-link current">技术手册</a><span class="arrow"></span>
    <ul class="nav-dropdown">
      <li><ul>
        <li><a href="/api/smartcontract/index.html" class="nav-link">JS Contract</a></li>
        <li><a href="/api/fibos/index.html" class="nav-link current">FIBOS Node</a></li>
        <li><a href="/api/eosiocontract/index.html" class="nav-link">System Contract</a></li>
        <li><a href="/api/token/index.html" class="nav-link">Token Contract</a></li>
        <li><a href="/api/fibosjs/index.html" class="nav-link">FIBOS.JS</a></li>
        <li><a href="/api/rpc/index.html" class="nav-link">RPC API</a></li>
        <!-- <li><a href="http://www.fibjs.org/docs/manual/module/readme.md.html" target="_blank">FIBJS API</a></li> -->
      </ul></li>
    </ul>
  </li>
<!-- <li>
  <a href="/api/technology/index.html" class="nav-link team">技术手册</a>
</li> -->
<li>
  <a href="http://forum.fo/" class="nav-link contribute " target="_blank">社区</a>
</li>
<li>
  <a href="https://fibos.io/" class="nav-link contribute" target="_blank">FIBOS</a>
</li>
<!-- <li class="nav-dropdown-container language">
  <a class="nav-link">中文</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://jp.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://ru.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Русский</a></li>
    <li><a href="https://kr.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>
 -->
  </ul>
</div>

  
  <div id="main" class="fix-sidebar">
    
    
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <!-- <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li> -->
<li>
  <a href="/" class="nav-link contribute">首页</a>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">开发指南</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/guide/introduction.html" class="nav-link">简介</a></li>
      <li><a href="/guide/installation.html" class="nav-link">安装</a></li>
      <li><a href="/guide/start.html" class="nav-link">入门</a></li>
      <li><a href="/guide/tutorials-instructions.html" class="nav-link tutorials">教程</a></li>
      <li><a href="/guide/smart-contract-instructions.html" class="nav-link">智能合约</a></li>
      <li><a href="/guide/system-resources.html" class="nav-link">系统合约</a></li>
      <li><a href="/guide/token-transfer.html" class="nav-link">Token 合约</a></li>
      <li><a href="/guide/node-instruction.html" class="nav-link">节点编程</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
    <a class="nav-link current">技术手册</a><span class="arrow"></span>
    <ul class="nav-dropdown">
      <li><ul>
        <li><a href="/api/smartcontract/index.html" class="nav-link">JS Contract</a></li>
        <li><a href="/api/fibos/index.html" class="nav-link current">FIBOS Node</a></li>
        <li><a href="/api/eosiocontract/index.html" class="nav-link">System Contract</a></li>
        <li><a href="/api/token/index.html" class="nav-link">Token Contract</a></li>
        <li><a href="/api/fibosjs/index.html" class="nav-link">FIBOS.JS</a></li>
        <li><a href="/api/rpc/index.html" class="nav-link">RPC API</a></li>
        <!-- <li><a href="http://www.fibjs.org/docs/manual/module/readme.md.html" target="_blank">FIBJS API</a></li> -->
      </ul></li>
    </ul>
  </li>
<!-- <li>
  <a href="/api/technology/index.html" class="nav-link team">技术手册</a>
</li> -->
<li>
  <a href="http://forum.fo/" class="nav-link contribute " target="_blank">社区</a>
</li>
<li>
  <a href="https://fibos.io/" class="nav-link contribute" target="_blank">FIBOS</a>
</li>
<!-- <li class="nav-dropdown-container language">
  <a class="nav-link">中文</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://jp.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://ru.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Русский</a></li>
    <li><a href="https://kr.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/api/fibos/index.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>
 -->
    </ul>
    <div class="list">
      
        <h2>
            
            FIBOS Node
          </h2>
        <ul class="menu-root">
  
    
    
    <!--  -->
    <li>
      <a href="/api/fibos/index.html" class="sidebar-link current"></a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>


<div class="content fibos with-sidebar ">
  
    
  
  
  
    <h1 id="FIBOS-模块"><a href="#FIBOS-模块" class="headerlink" title="FIBOS 模块"></a>FIBOS 模块</h1><p>fibos 实例对象</p>
<p>使用方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fibos = <span class="built_in">require</span>(<span class="string">'fibos'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="实例属性"><a href="#实例属性" class="headerlink" title="实例属性"></a>实例属性</h2><h3 id="data-dir"><a href="#data-dir" class="headerlink" title="data_dir"></a>data_dir</h3><p>fibos 的数据存放目录</p>
<p>类型：String</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.data_dir = <span class="string">'./fibos_data_dir'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="config-dir"><a href="#config-dir" class="headerlink" title="config_dir"></a>config_dir</h3><p>fibos 的配置存放目录</p>
<p>类型：String</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.config_dir = <span class="string">'./fibos_config_dir'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="core-symbol"><a href="#core-symbol" class="headerlink" title="core_symbol"></a>core_symbol</h3><p>fibos 主 token 名称</p>
<p>类型：String</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.core_symbol = <span class="string">'FO'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="pubkey-prefix"><a href="#pubkey-prefix" class="headerlink" title="pubkey_prefix"></a>pubkey_prefix</h3><p>fibos 公钥前缀</p>
<p>类型：String</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.pubkey_prefix = <span class="string">'FO'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="enableJSContract"><a href="#enableJSContract" class="headerlink" title="enableJSContract"></a>enableJSContract</h3><p>查询和设置 JavaScript 智能合约状态，为 True 时支持 JavaScript 智能合约</p>
<p>类型：Boolean</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.enableJSContract = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><h3 id="load"><a href="#load" class="headerlink" title="load"></a>load</h3><p>加载 load 本身配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.load(cfgs);</span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<ul>
<li>cfgs : Object ，配置对象。</li>
</ul>
<p>加载系统 plugin 及其配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.load( name, cfg );</span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<ul>
<li>name : String ，系统 plugin 名称。</li>
<li>cfg : Object ，提供给系统 plugin 的配置。[可选]</li>
</ul>
<h3 id="start"><a href="#start" class="headerlink" title="start"></a>start</h3><p>启动 fibos</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.start();</span><br></pre></td></tr></table></figure>
<h3 id="stop"><a href="#stop" class="headerlink" title="stop"></a>stop</h3><p>停止 fibos</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fibos.stop();</span><br></pre></td></tr></table></figure>
<h2 id="系统-plugin"><a href="#系统-plugin" class="headerlink" title="系统 plugin"></a>系统 plugin</h2><blockquote>
<p> 注意：系统 plugin 请配合 fibos.load 实例方法进行使用</p>
</blockquote>
<h3 id="http-插件"><a href="#http-插件" class="headerlink" title="http 插件"></a>http 插件</h3><p>启用 FIBOS 节点上所有的 RPC API</p>
<p>配置说明：</p>
<table>
<thead>
<tr>
<th>配置名称</th>
<th>配置含义</th>
<th>默认值</th>
<th>参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td>http-server-address</td>
<td>本地 http 服务地址</td>
<td>127.0.0.1:8888</td>
<td></td>
</tr>
<tr>
<td>https-server-address</td>
<td>本地 https 服务地址</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>max-body-size</td>
<td>RPC 请求允许最大字节</td>
<td>1024*1024(bytes)</td>
<td></td>
</tr>
<tr>
<td>verbose-http-errors</td>
<td>显示 Http 返回的错误日志</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>http-validate-host</td>
<td>验证 Http 请求 host</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>access-control-allow-origin</td>
<td>对每个请求返回特殊的 Access-Control-Allow-Origin</td>
<td>-</td>
<td>*</td>
</tr>
</tbody>
</table>
<h3 id="chain-插件"><a href="#chain-插件" class="headerlink" title="chain 插件"></a>chain 插件</h3><p>是 FIBOS 节点上处理和聚合链数据所需的核心插件</p>
<p>配置说明：</p>
<table>
<thead>
<tr>
<th>配置名称</th>
<th>配置含义</th>
<th>默认值</th>
<th>参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td>genesis-json</td>
<td>指定创世块数据路径</td>
<td>-</td>
<td>文件路径 参考文件[FIBOS MainNet]<a href="https://github.com/FIBOS-Community/fibos-nodes/blob/master/genesis.json" target="_blank" rel="noopener">https://github.com/FIBOS-Community/fibos-nodes/blob/master/genesis.json</a>)</td>
</tr>
<tr>
<td>genesis-timestamp</td>
<td>覆盖创世块中的初试时间戳</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>print-genesis-json</td>
<td>是否打印创世数据</td>
<td>false</td>
<td>-</td>
</tr>
<tr>
<td>fix-reversible-blocks</td>
<td>是否将数据恢复到不可逆高度</td>
<td>false</td>
<td>-(无法使用)</td>
</tr>
<tr>
<td>replay-blockchain</td>
<td>是否清除状态数据然后回滚所有数据</td>
<td>false</td>
<td>-(无法使用,猜测为命令行使用?)</td>
</tr>
<tr>
<td>hard-replay-blockchain</td>
<td>是否清除状态数据,然后从区块日志中回滚尽可能多的数据</td>
<td>false</td>
<td>-</td>
</tr>
<tr>
<td>delete-all-blocks</td>
<td>是否删除所有的状态数据和区块数据</td>
<td>false</td>
<td>-</td>
</tr>
<tr>
<td>truncate-at-block</td>
<td>停止出块,并在该区块高度回滚</td>
<td>0</td>
<td>-(无法使用)</td>
</tr>
<tr>
<td>blocks-dir</td>
<td>区块数据存放地址</td>
<td>blocks</td>
<td>-</td>
</tr>
<tr>
<td>abi-serializer-max-time-ms</td>
<td>覆盖默认 ABI 序列化允许的最大时间</td>
<td>15*1000(ms)</td>
<td>-</td>
</tr>
<tr>
<td>chain-state-db-size-mb</td>
<td>区块数据库中允许的最大容量</td>
<td>1024 (MB)</td>
<td>-</td>
</tr>
<tr>
<td>chain-state-db-guard-size-mb</td>
<td>当区块数据库中剩余的数据小于此大小时可以安全地关闭节点</td>
<td>128(MB)</td>
<td>-</td>
</tr>
<tr>
<td>reversible-blocks-db-size-mb</td>
<td>最大能够回滚的数据量</td>
<td>340(MB)</td>
<td>-</td>
</tr>
<tr>
<td>contracts-console</td>
<td>是否打印合约输出</td>
<td>false</td>
<td>-</td>
</tr>
<tr>
<td>read-mode</td>
<td>mode database contains changes done up to the head block plus changes made by transactions not yet included to the blockchain mode database contains changes done up to the current head block.</td>
<td>speculative</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="net-插件"><a href="#net-插件" class="headerlink" title="net 插件"></a>net 插件</h3><p>组成一个网络</p>
<p>配置说明：</p>
<table>
<thead>
<tr>
<th>配置名称</th>
<th>配置含义</th>
<th>默认值</th>
<th>参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td>p2p-listen-endpoint</td>
<td>监听 p2p 连接的地址和端口</td>
<td>0.0.0.0:9876</td>
<td>-</td>
</tr>
<tr>
<td>p2p-server-addrsss</td>
<td>提供给其它节点 p2p 服务地址</td>
<td>p2p-listen-endpoint</td>
<td>-</td>
</tr>
<tr>
<td>p2p-peer-address</td>
<td>公共的 p2p 对等节点地址</td>
<td>-</td>
<td>FIBOS TestNet [ 103.80.170.107:9876 ]</td>
</tr>
<tr>
<td>p2p-max-nodes-per-host</td>
<td>单个 IP 能够连接的最大客户端数量</td>
<td>1</td>
<td>-</td>
</tr>
<tr>
<td>allowed-connection</td>
<td>允许连接</td>
<td>any</td>
<td>‘any’/‘producers’/‘specified’/‘none’。如果 ‘specified’ ，则必须至少指定一次对等密钥。如果只有 ‘producers’ ，则不需要对等密钥。</td>
</tr>
<tr>
<td>peer-private-key</td>
<td>一个 公钥、私钥组成的数组</td>
<td></td>
<td></td>
</tr>
<tr>
<td>max-clients</td>
<td>允许连接客户端的最大数量</td>
<td>25</td>
<td>0: 无限制</td>
</tr>
<tr>
<td>connection-cleanup-period</td>
<td>清除不可用链接周期</td>
<td>30(s)</td>
<td>-</td>
</tr>
<tr>
<td>network-version-match</td>
<td>是否需要相同版本的网络</td>
<td>false</td>
<td>-</td>
</tr>
<tr>
<td>peer-log-format</td>
<td>节点日志格式化</td>
<td>[“${name}” ${_ip}:${_port}]</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="chain-api-插件"><a href="#chain-api-插件" class="headerlink" title="chain_api 插件"></a>chain_api 插件</h3><p>将 chain_plugin 的功能公开到由 http_plugin 管理的 RPC API 接口上</p>
<p>依赖：</p>
<ul>
<li>chain_plugin</li>
<li>http_plugin</li>
</ul>
<p>配置说明：</p>
<table>
<thead>
<tr>
<th>api</th>
<th>请求</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>get_info</td>
<td>GET</td>
<td>获取与节点相关的最新信息</td>
</tr>
<tr>
<td>get_block</td>
<td>POST</td>
<td>获取一个块的信息</td>
</tr>
<tr>
<td>get_account</td>
<td>POST</td>
<td>获取账户的信息</td>
</tr>
<tr>
<td>get_code</td>
<td>POST</td>
<td>获取智能合约代码</td>
</tr>
</tbody>
</table>
<h3 id="producer-插件"><a href="#producer-插件" class="headerlink" title="producer 插件"></a>producer 插件</h3><p>加载出块节点所需要的功能</p>
<p>配置说明：</p>
<table>
<thead>
<tr>
<th>配置名称</th>
<th>配置含义</th>
<th>默认值</th>
<th>参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td>max-transaction-time</td>
<td>事务最大超时时间</td>
<td>30(s)</td>
<td>-</td>
</tr>
<tr>
<td>greylist-account</td>
<td>无法使用 CPU 和 NET 的账号</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>enable-stale-production</td>
<td>启用产生区块,即使区块是静止的</td>
<td></td>
<td></td>
</tr>
<tr>
<td>max-irreversible-block-age</td>
<td>最大的不可逆块时间</td>
<td>-1</td>
<td>&gt;1</td>
</tr>
<tr>
<td>producer-name</td>
<td>控制节点出块的账户名</td>
<td></td>
<td>eosio(可多参)</td>
</tr>
<tr>
<td>private-key</td>
<td>签名程序的公钥、私钥</td>
<td></td>
<td>(可多参数)</td>
</tr>
</tbody>
</table>
<h3 id="bnet-插件"><a href="#bnet-插件" class="headerlink" title="bnet 插件"></a>bnet 插件</h3><p>提供了一个 P2P 协议，使用非常简单的算法持久同步两个区块链</p>
<p>配置说明：</p>
<table>
<thead>
<tr>
<th>配置名称</th>
<th>配置含义</th>
<th>默认值</th>
<th>参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td>bnet-endpoint:</td>
<td>所监听的传入链接的端点</td>
<td>0.0.0.0:4321</td>
<td></td>
</tr>
<tr>
<td>bnet-follow-irreversible</td>
<td>是否只接受从其他端点的不可逆的块</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>bnet-threads</td>
<td>用于处理网络消息的线程数</td>
<td></td>
<td></td>
</tr>
<tr>
<td>bnet-connect</td>
<td>其他节点的远程端点连接; 根据需要使用多个 bnet-connect 选项来组成网络</td>
<td></td>
<td></td>
</tr>
<tr>
<td>bnet-no-trx</td>
<td>这个 peer 请求其他节点没有 pending 的 transactions</td>
<td>false</td>
<td>false</td>
</tr>
</tbody>
</table>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><strong>bp节点</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fibos = <span class="built_in">require</span>(<span class="string">'fibos'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">var</span> isInit = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> producername = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">var</span> p2p_peer_address = [</span><br><span class="line">    <span class="string">"se-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"sl-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"to-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"ca-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"ln-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"va-p2p.fibos.io:9870"</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.notice(<span class="string">"start FIBOS producer nodes"</span>);</span><br><span class="line"></span><br><span class="line">fibos.config_dir = <span class="string">"./fibos_config_dir"</span>;</span><br><span class="line">fibos.data_dir = <span class="string">"./fibos_data_dir"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.notice(<span class="string">"config_dir:"</span>, fibos.config_dir);</span><br><span class="line"><span class="built_in">console</span>.notice(<span class="string">"data_dir:"</span>, fibos.data_dir);</span><br><span class="line"></span><br><span class="line">fibos.load(<span class="string">"net"</span>, &#123;</span><br><span class="line">    <span class="string">"p2p-peer-address"</span>: p2p_peer_address,</span><br><span class="line">    <span class="string">"p2p-listen-endpoint"</span>: <span class="string">"0.0.0.0:9870"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fibos.load(<span class="string">"producer"</span>, &#123;</span><br><span class="line">    <span class="string">'producer-name'</span>: producername,</span><br><span class="line">    <span class="string">'enable-stale-production'</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">'private-key'</span>: [active_publickey, active_privateKey]</span><br><span class="line">&#125;);</span><br><span class="line">fibos.load(<span class="string">"chain"</span>, &#123;</span><br><span class="line">    <span class="comment">// "contracts-console": true,</span></span><br><span class="line">    <span class="string">'chain-state-db-size-mb'</span>: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">    <span class="string">'genesis-json'</span>: <span class="string">'genesis.json'</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//允许js合约</span></span><br><span class="line">fibos.enableJSContract = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">fibos.start();</span><br></pre></td></tr></table></figure>
<p><strong>同步节点</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fibos = <span class="built_in">require</span>(<span class="string">'fibos'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> producername = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">var</span> p2p_peer_address = [</span><br><span class="line">    <span class="string">"se-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"sl-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"to-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"ca-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"ln-p2p.fibos.io:9870"</span>,</span><br><span class="line">    <span class="string">"va-p2p.fibos.io:9870"</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.notice(<span class="string">"start FIBOS ABI nodes"</span>);</span><br><span class="line"></span><br><span class="line">fibos.config_dir = <span class="string">"./fibos_config_dir"</span>;</span><br><span class="line">fibos.data_dir = <span class="string">"./fibos_data_dir"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.notice(<span class="string">"config_dir:"</span>, fibos.config_dir);</span><br><span class="line"><span class="built_in">console</span>.notice(<span class="string">"data_dir:"</span>, fibos.data_dir);</span><br><span class="line"></span><br><span class="line">fibos.load(<span class="string">"http"</span>, &#123;</span><br><span class="line">    <span class="string">"http-server-address"</span>: <span class="string">"0.0.0.0:8870"</span>,</span><br><span class="line">    <span class="string">"access-control-allow-origin"</span>: <span class="string">"*"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fibos.load(<span class="string">"net"</span>, &#123;</span><br><span class="line">    <span class="string">"p2p-peer-address"</span>: p2p_peer_address,</span><br><span class="line">    <span class="string">"p2p-listen-endpoint"</span>: <span class="string">"0.0.0.0:9870"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fibos.load(<span class="string">"producer"</span>);</span><br><span class="line"></span><br><span class="line">fibos.load(<span class="string">"chain"</span>, &#123;</span><br><span class="line">    <span class="string">'chain-state-db-size-mb'</span>: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">    <span class="string">'genesis-json'</span>: <span class="string">'genesis.json'</span></span><br><span class="line">&#125;);</span><br><span class="line">fibos.load(<span class="string">"chain_api"</span>);</span><br><span class="line">fibos.load(<span class="string">"history"</span>);</span><br><span class="line">fibos.load(<span class="string">"history_api"</span>);</span><br><span class="line"><span class="comment">//允许js合约</span></span><br><span class="line">fibos.enableJSContract = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">fibos.start();</span><br></pre></td></tr></table></figure>
<h4 id="genesis-json-文件"><a href="#genesis-json-文件" class="headerlink" title="genesis.json 文件"></a>genesis.json 文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"initial_timestamp"</span>: <span class="string">"2018-08-28T00:00:00.000"</span>,</span><br><span class="line">    <span class="string">"initial_key"</span>: <span class="string">"FO6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV"</span>,</span><br><span class="line">    <span class="string">"initial_configuration"</span>: &#123;</span><br><span class="line">        <span class="string">"max_block_net_usage"</span>: <span class="number">1048576</span>,</span><br><span class="line">        <span class="string">"target_block_net_usage_pct"</span>: <span class="number">1000</span>,</span><br><span class="line">        <span class="string">"max_transaction_net_usage"</span>: <span class="number">524288</span>,</span><br><span class="line">        <span class="string">"base_per_transaction_net_usage"</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="string">"net_usage_leeway"</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="string">"context_free_discount_net_usage_num"</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="string">"context_free_discount_net_usage_den"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">"max_block_cpu_usage"</span>: <span class="number">200000</span>,</span><br><span class="line">        <span class="string">"target_block_cpu_usage_pct"</span>: <span class="number">1000</span>,</span><br><span class="line">        <span class="string">"max_transaction_cpu_usage"</span>: <span class="number">150000</span>,</span><br><span class="line">        <span class="string">"min_transaction_cpu_usage"</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">"max_transaction_lifetime"</span>: <span class="number">3600</span>,</span><br><span class="line">        <span class="string">"deferred_trx_expiration_window"</span>: <span class="number">600</span>,</span><br><span class="line">        <span class="string">"max_transaction_delay"</span>: <span class="number">3888000</span>,</span><br><span class="line">        <span class="string">"max_inline_action_size"</span>: <span class="number">4096</span>,</span><br><span class="line">        <span class="string">"max_inline_action_depth"</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="string">"max_authority_depth"</span>: <span class="number">6</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"initial_chain_id"</span>: <span class="string">"6aa7bd33b6b45192465afa3553dedb531acaaff8928cf64b70bd4c5e49b7ec6a"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  
  
</div>

    
  </div>
  <script src="/js/smooth-scroll.min.js">"</script>
  

  <!-- main custom script for sidebars, version selects etc. -->
  <script src="/js/css.escape.js">"</script>
  <script src="/js/common.js">"</script>

  <!-- fastclick -->
  <script src="/js/fastclick.js">"</script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      FastClick.attach(document.body)
    }, false)
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125332104-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-125332104-3');
  </script>
</body>

</html>